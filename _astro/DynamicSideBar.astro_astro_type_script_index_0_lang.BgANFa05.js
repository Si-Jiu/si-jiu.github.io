import{a as r}from"./config.kMwT5NJ0.js";const a={profile:"../components/widget/Profile.astro",announcement:"../components/widget/Announcement.astro",categories:"../components/widget/Categories.astro",tags:"../components/widget/Tags.astro",toc:"../components/widget/TOC.astro","music-player":"../components/widget/MusicPlayer.svelte",pio:"../components/widget/Pio.astro",custom:null};class d{config;enabledComponents;constructor(e=r){this.config=e,this.enabledComponents=this.getEnabledComponents()}getConfig(){return this.config}getEnabledComponents(){return this.config.components.filter(e=>e.enable).sort((e,t)=>e.order-t.order)}getComponentsByPosition(e){return this.enabledComponents.filter(t=>t.position===e)}getAnimationDelay(e,t){return e.animationDelay!==void 0?e.animationDelay:this.config.defaultAnimation.enable?this.config.defaultAnimation.baseDelay+t*this.config.defaultAnimation.increment:0}getComponentClass(e,t){const s=[];return e.class&&s.push(e.class),e.responsive?.hidden&&e.responsive.hidden.forEach(i=>{switch(i){case"mobile":s.push("hidden","md:block");break;case"tablet":s.push("md:hidden","lg:block");break;case"desktop":s.push("lg:hidden");break}}),s.join(" ")}getComponentStyle(e,t){const s=[];e.style&&s.push(e.style);const i=this.getAnimationDelay(e,t);return i>0&&s.push(`animation-delay: ${i}ms`),s.join("; ")}isCollapsed(e,t){return e.responsive?.collapseThreshold?t>=e.responsive.collapseThreshold:!1}getComponentPath(e){return a[e]}shouldShowSidebar(e){return this.config.enable?this.config.responsive.layout[e]==="sidebar":!1}getBreakpoints(){return this.config.responsive.breakpoints}updateConfig(e){this.config={...this.config,...e},this.enabledComponents=this.getEnabledComponents()}addComponent(e){this.config.components.push(e),this.enabledComponents=this.getEnabledComponents()}removeComponent(e){this.config.components=this.config.components.filter(t=>t.type!==e),this.enabledComponents=this.getEnabledComponents()}toggleComponent(e,t){const s=this.config.components.find(i=>i.type===e);s&&(s.enable=t,this.enabledComponents=this.getEnabledComponents())}reorderComponent(e,t){const s=this.config.components.find(i=>i.type===e);s&&(s.order=t,this.enabledComponents=this.getEnabledComponents())}isSidebarComponent(e){return e!=="pio"}}const n=new d;class l{sidebar;resizeObserver=null;constructor(){this.sidebar=document.getElementById("dynamic-sidebar"),this.init()}init(){this.sidebar&&(this.setupResponsiveDisplay(),this.setupResizeObserver(),this.setupWidgetInteractions(),this.applyInitialAnimations())}setupResponsiveDisplay(){this.updateResponsiveDisplay(),window.addEventListener("resize",()=>this.updateResponsiveDisplay())}updateResponsiveDisplay(){if(!this.sidebar)return;const e=n.getBreakpoints(),t=window.innerWidth;let s;t<e.mobile?s="mobile":t<e.tablet?s="tablet":s="desktop";const i=n.shouldShowSidebar(s);this.sidebar.style.setProperty(`--sidebar-${s}-display`,i?"block":"none"),this.sidebar.setAttribute("data-device-type",s)}setupResizeObserver(){!this.sidebar||!window.ResizeObserver||(this.resizeObserver=new ResizeObserver(e=>{for(const t of e){const{width:s,height:i}=t.contentRect;console.debug(`Sidebar size changed: ${s}x${i}`)}}),this.resizeObserver.observe(this.sidebar))}setupWidgetInteractions(){if(!this.sidebar)return;this.sidebar.querySelectorAll(".widget-container").forEach(t=>{const s=t.getAttribute("data-widget-type");t.addEventListener("mouseenter",()=>{t.classList.add("widget-hover")}),t.addEventListener("mouseleave",()=>{t.classList.remove("widget-hover")}),console.debug(`Widget ${s} interaction setup complete`)})}applyInitialAnimations(){if(!this.sidebar)return;this.sidebar.querySelectorAll(".widget-container").forEach((t,s)=>{const i=s*100;t.style.animationDelay=`${i}ms`})}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}}const p=new l;window.addEventListener("beforeunload",()=>{p.destroy()});
